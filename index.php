<?phpheader('Content-Type: application/json');include_once 'api/crud/TaskCRUD.php';$uri = $_SERVER['REQUEST_URI'];$method = $_SERVER['REQUEST_METHOD'];$split = split('/', $uri);const API_URI = '/tasks';const TITLE_KEY = 'HTTP_TITLE';const DATA_KEY = 'HTTP_DATA';if(apiRequest($uri) && $method === 'GET') {    if (count($split) == 2) {//read {id}        http_response_code(TaskCRUD::read((int) $split[1]));    } else if (count($split) == 1) {//read all        http_response_code(TaskCRUD::readAll());    } else {        http_response_code(404);    }} else if(apiRequest($uri) && $method === 'POST') {    if (count($split) == 1 && isset($_SERVER[TITLE_KEY]) && isset($_SERVER[DATA_KEY])) {//create        http_response_code(TaskCRUD::create($_SERVER[TITLE_KEY], $_SERVER[DATA_KEY]));    } else {        http_response_code(400);    }} else if(apiRequest($uri) && $method === 'DELETE') {    if (count($split) == 2) {//delete {id}        http_response_code(TaskCRUD::delete((int) $split[1]));    } else {        http_response_code(400);    }} else if(apiRequest($uri) && $method === 'PUT') {    if (count($split) == 2 && isset($_SERVER[TITLE_KEY]) && isset($_SERVER[DATA_KEY])) {//update {id}        http_response_code(TaskCRUD::update((int) $split[1], $_SERVER[TITLE_KEY], $_SERVER[DATA_KEY]));    } else {        http_response_code(400);    }} else if(apiRequest($uri)) {    http_response_code(405);} else {    http_response_code(404);}function split($separator, $string): array {    $arr = explode($separator, $string);    $res = [];    foreach ($arr as $element) {        if (trim($element) != '') {            array_push($res, $element);        }    }    return $res;}function startsWith(string $haystack, string $needle): bool {    return substr($haystack, 0, strlen($needle)) === $needle;}function apiRequest(string $uri): bool {    return startsWith($uri, API_URI);}